<?php
/**
* 	
*/

# No direct access
defined('ABSPATH') or die(ARV\NO_DIRECT_ACCESS_MESSAGE);
	
# Initialize
$router =& $this->router();
$installerModel =& $this->mvcServiceManager()->getModel();
# Get forms
$forms =& $this->result();

/**
* put your comment there...
* 
* @var ARV\Modules\Installer\Model\Forms\AWStatsDiscoverParametersForm
*/
$discoverForm =& $forms->discoverForm;

/**
* put your comment there...
* 
* @var ARV\Modules\Installer\Model\Forms\InstallationParametersForm
*/
$installationform =& $forms->installationForm;
?>
<!-- STYLESHEET FILE START -->
<style type="text/css">
	fieldset {border: 1px solid gray; padding: 2px 5px; display: inline; margin-top: 30px;}
	fieldset strong {background-color: white;}
	label {width: 200px; display: inline-block;}
	#arv-reset {margin-top: 20px;}
	input[type="submit"] {width: 120px;}
	input[type="text"] {width: 512px;}
</style>
<!-- STYLESHEET FILE ENDD -->
<div id="arv-instalation-page" class="arv-body">
<?php if ($installerModel->hasErrors()) : ?>
	<ul id="installations-errors">
<?php foreach ($installerModel->getCleanErrors() as $errorMessage) : ?>
		<li><?php echo $errorMessage; ?></li>
<?php endforeach; ?>
	</ul>
<?php $installerModel->writeState(); # Re-write state as this is running too late! ?>
<?php endif; ?>
	<form id="arv-discover-awstats-params-tool" method="post">
		<fieldset>
			<strong>AWStats Parameters</strong>
			<p>
				The following parameters are being used to help you discover AWStats installation parameters that will be used for generating report
				You can change the following parameters and press discover to get ARV Plugin discovering the installation parameters for you.
			</p>
			<ul>
				<li>
					<label for="discover-script-path" title="">AWStats Script</label>
					<input id="discover-script-path" type="text" name="discover[scriptPath]" value="<?php echo $discoverForm->getAWStatsScript()->getValue(); ?>">
				</li>
				<li>
					<label for="discover-domain" title="">Domain</label>
					<input id="discover-domain" type="text" name="discover[domain]" value="<?php echo $discoverForm->getDomain()->getValue() ?>">
				</li>
				<li>
					<label for="discover-system-user" title="">System User</label>
					<input id="discover-system-user" type="text" name="discover[systemUser]" value="<?php echo $discoverForm->getSystemUser()->getValue() ?>">
				</li>
				<li>
					<input type="submit" name="Auto Discover" value="Auto Discover" />
				</li>
			</ul>
		</fieldset>
	</form>
	<form id="arv-installation-form" method="post" action="<?php echo $router->routeAction('Install') ?>">
		<fieldset>
			<strong>AWStats Installation Parameters</strong>
			<p>
				This is the final AWStats parameters to be used for generating AWStats report. You can either fill it manually or use the form above for auto discovering those parameters.
			</p>
			<ul>
				<li>
					<label for="installs-domain" title="">Domain</label>
					<input id="installs-domain" type="text" name="awstatsParams[domain]" value="<?php echo $installationform->getDomain()->getValue() ?>">
				</li>
				<li>
					<label for="" title="">AWStats Script</label>
					<input type="text" name="awstatsParams[scriptPath]" value="<?php echo $installationform->getAWStatsScriptPath()->getValue(); ?>">
				</li>
				<li>
					<label for="" title="">Build Static</label>
					<input type="text" name="awstatsParams[buildStaticPath]" value="<?php echo $installationform->getBuildStaticPath()->getValue(); ?>">
				</li>
				<li>
					<label for="" title="">Config File</label>
					<input type="text" name="awstatsParams[configFile]" value="<?php echo $installationform->getConfigFilePath()->getValue(); ?>">
				</li>
				<li>
					<label for="" title="">Icons Directory</label>
					<input type="text" name="awstatsParams[iconsDir]" value="<?php echo $installationform->getIconsDirPath()->getValue(); ?>">
				</li>
				<li>
					<input type="submit" name="Install" value="Install" />
				</li>
			</ul>
		</fieldset>
	</form>
	<form id="arv-reset" method="post" action="<?php echo $router->routeAction('Reset') ?>">
		<input type="submit" name="Reset" value="Reset" />
	</form>
</div>